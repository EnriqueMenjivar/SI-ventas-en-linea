<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="description: ventas en linea" content="" />
<meta name="author:metabit" content="" />
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>


<title>Reporte Cantidad de Ventas</title>

<!-- Custom fonts for this template-->
<link th:href="@{/vendor/fontawesome-free/css/all.min.css}"
	rel="stylesheet" type="text/css">
<link
	href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
	rel="stylesheet">

<!-- Custom styles for this template-->
<link th:href="@{/css/sb-admin-2.min.css}" rel="stylesheet">
<link th:href="@{/css/style.css}" rel="stylesheet">

<!-- Custom styles for this page -->
<link th:href="@{/vendor/datatables/dataTables.bootstrap4.min.css}"
	rel="stylesheet">
</head>
<body id="page-top">
	<!-- Page Wrapper -->
	<div id="wrapper">
		<!-- Sidebar -->
		<div th:insert="fragments/sidebar::sidebar"
			class="bg-gradient-primary"></div>
		<!-- Content Wrapper -->
		<div id="content-wrapper" class="d-flex flex-column">
			<!-- Main Content -->
			<div id="content">
				<div th:insert="fragments/topbar::topbar"></div>
				<!-- Begin Page Content -->
				<div class="container-fluid">
					<!-- ESPACIO DE TRABAJO  -->

					<!-- Page Heading -->
					<!-- Page Heading -->


					<div class="card-body">
						<h3 align="center">Reporte de cantidad de ventas en un
							periodo de tiempo</h3>
						<div class=" mb-4 datesLayout">
							<span class="labelDate">Fecha inicio: </span> <span
								th:text="${fechaInicio}"></span> <span class="labelDate">
								Fecha Fin:</span> <span th:text="${fechaFin}"></span>
						</div>
						<div class="table-responsive">
							<table class="table table-striped" id="dataTable" width="100%"
								cellspacing="0">
								<thead>
									<tr>
										<th>Nombre Categoria</th>
										<th>Cantidad</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="fila: ${reporte}">
										<td th:text="${fila.categoria}"></td>
										<td th:text="${fila.cantidadEnVentas}"></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>

					<!-- FIN DE ESPACIO DE TRABAJO -->
					<div class="mb-4 actionsLayout">

						<a th:href="@{'/reporteCantidadVentas/index'}"><button class="regresarBtn">Regresar</button></a>
						<button class="generarBtn" id="btnCrearPDF">Generar PDF</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Scroll to Top Button-->
	<a class="scroll-to-top rounded" href="#page-top"> <i
		class="fas fa-angle-up"></i>
	</a>

	<!-- Logout Modal-->
	<div th:insert="fragments/modallogout::modallogout"></div>


	<script type="text/javascript"> 

 document.addEventListener("DOMContentLoaded", () => {
    // Escuchamos el click del botón
    const $boton = document.querySelector("#btnCrearPDF");
    $boton.addEventListener("click", () => {
        const $elementoParaConvertir = document.querySelector(".card-body"); // <-- Aquí puedes elegir cualquier elemento del DOM
        html2pdf()
            .set({
                margin: 1,
                filename: 'ReporteCantidadVentas.pdf',
                image: {
                    type: 'jpeg',
                    quality: 0.98
                },
                html2canvas: {
                    scale: 3, // A mayor escala, mejores gráficos, pero más peso
                    letterRendering: true,
                },
                jsPDF: {
                    unit: "in",
                    format: "a3",
                    orientation: 'portrait' // landscape o portrait
                }
            })
            .from($elementoParaConvertir)
            .save()
            .catch(err => console.log(err));
    });
});</script>

</body>

</html>